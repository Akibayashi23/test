# Status
- **Draft**: 記述中またはレビュー中

# Decision
リリースブランチとタグについて、セマンティックバージョンを統一する場合と統一しない場合の方針を検討する。依存関係のある複数のリポジトリ（A, B, C）におけるリリース戦略の選択肢は以下の2つである。

## 1. セマンティックバージョンを統一する場合

- **リリースブランチ**: すべてのリポジトリで、統一したセマンティックバージョンでリリースブランチを作成する。例：`release/1.1.0`
- **タグ**: セマンティックバージョンのタグをすべてのリポジトリで統一し、同じバージョンを付与する。例：`v1.1.0`

### 具体例：
- Aリポジトリのリリースブランチ名：`release/1.1.0`
- Bリポジトリのリリースブランチ名：`release/1.1.0`
- Cリポジトリのリリースブランチ名：`release/1.1.0`

すべてのリポジトリに対して、`v1.1.0` という統一されたタグを付けることで、バージョンの整合性が保証される。

### メリット：
- **依存関係の明確化**: すべてのリポジトリが同じバージョン番号でリリースされるため、どのリポジトリがどのバージョンに依存しているかが簡単に把握できる。
- **管理がシンプル**: プロジェクト全体で一貫したリリーススケジュールを保つことができ、バージョン管理が明確である。

### デメリット：
- **リリースの柔軟性が制限される**: 各リポジトリの開発スピードやリリース準備が異なる場合、すべてのリポジトリが同じタイミングでリリースされなければならないため、リリースが遅れる可能性がある。

## 2. セマンティックバージョンを統一しない場合

- **リリースブランチ**: 各リポジトリは独自のセマンティックバージョンでリリースブランチを持ち、進行状況に基づいて個別に管理される。例：`release/1.0.0`、`release/1.0.5`
- **タグ**: 各リポジトリは独自のセマンティックバージョンを使用し、リリースに応じたバージョン番号を付ける。例：Aリポジトリは `v1.0.0`、Bリポジトリは `v1.0.5`、Cリポジトリは `v2.0.0`

### 具体例：
- Aリポジトリのリリースブランチ名：`release/1.0.0` → タグ：`v1.0.0`
- Bリポジトリのリリースブランチ名：`release/1.0.5` → タグ：`v1.0.5`
- Cリポジトリのリリースブランチ名：`release/2.0.0` → タグ：`v2.0.0`

### メリット：
- **柔軟なリリース管理**: 各リポジトリが独立してリリースでき、他のリポジトリの進捗に左右されずに機能追加や修正が行える。
- **リリースのスピード向上**: 各リポジトリが独自のタイミングでリリースできるため、開発サイクルを加速できる。

### デメリット：
- **依存関係の追跡が複雑化**: 各リポジトリのバージョンが独立しているため、どのバージョンがどの依存関係に対応しているかを追跡するのが難しくなる。
- **バージョンの統一感が失われる**: ユーザーや開発者がどのバージョンを使用すべきか迷う可能性がある。

# Context
複数の依存関係のあるリポジトリ（A, B, C）が存在し、それぞれのリリースにおいてセマンティックバージョンを **統一するかどうか** を決定する必要がある。バージョンを統一すれば一貫したバージョン管理が可能だが、各リポジトリが異なる速度で開発を進めている場合には、バージョンの柔軟性が必要になる。これに対し、バージョンを統一しない場合は各リポジトリが独自にリリースできるが、依存関係の管理が複雑になる可能性がある。

# Consideration

### セマンティックバージョンを統一する場合
#### Pro:
- **依存関係の明確化**: すべてのリポジトリが同じバージョン番号（例：`v1.1.0`）でリリースされるため、どのバージョンが互いに対応しているかが一目で把握できる。
- **一貫性の確保**: リリース番号が統一されているため、リポジトリ間でバージョンの一貫性が保たれる。バージョン番号だけでリリースの内容を追跡できる。
- **管理が容易**: 複数のリポジトリが統一されたバージョン番号で管理されるため、プロジェクト全体のリリース管理が簡単になる。バージョンの追跡や整合性確認が容易になる。
- **テストや統合の調整がスムーズ**: リポジトリ間の統合テストや最終リリースに向けた調整がスムーズに行える。

#### Con:
- **柔軟性が低下**: 各リポジトリの開発スピードが異なる場合、すべてのリポジトリが同じバージョンに追従しなければならないため、リリースの柔軟性が低下する。
- **リリースタイミングの調整が難しい**: すべてのリポジトリを同時にリリースするため、個々のリポジトリの進捗が遅れると、全体のリリースが遅れるリスクがある。
- **大規模プロジェクトでは管理が複雑**: 各リポジトリで変更内容が多岐にわたる場合、一貫してバージョンを統一することが煩雑になり、管理の負担が増加する。

### セマンティックバージョンを統一しない場合
#### Pro:
- **柔軟なリリース管理**: 各リポジトリが独自にバージョン管理を行えるため、リリースタイミングや開発速度に応じてリリースできる柔軟性が高い。
- **個別リリースが可能**: 依存関係にかかわらず、個々のリポジトリの変更があれば速やかにリリースでき、他のリポジトリの進捗を待つ必要がない。
- **個別の修正が容易**: リポジトリごとに必要な修正や機能追加を独立してリリースでき、リリースサイクルが加速する。

#### Con:
- **依存関係の追跡が複雑化**: 各リポジトリが異なるバージョンを持つことで、どのバージョンがどの依存関係に対応しているかを追跡するのが難しくなる。
- **バージョン管理の統一感が失われる**: バージョンが統一されないため、ユーザーや開発者がどのバージョンを使用すべきか迷う可能性がある。
- **リリースの同期が難しい**: リリポジトリごとに異なるリリーススケジュールを取るため、リポジトリ間の統合テストやリリース調整が複雑になりやすい。

# Consequences

### セマンティックバージョンを統一する場合
- 各リポジトリが一貫したバージョンで管理され、依存関係が明確で管理が簡単になる。一方で、リリースタイミングの調整が必要となり、開発フローが遅延する可能性がある。
- バージョン番号が一貫することで、リポジトリ間の依存関係がわかりやすく、追跡も容易だが、全リポジトリで統一したリリースタイミングを合わせる必要がある。

### セマンティックバージョンを統一しない場合
- 各リポジトリが独自のバージョンで管理され、柔軟なリリースが可能になる。リリース日を基準にバージョン整合性を保つことで柔軟性が高まるが、依存関係の追跡やリリース調整が煩雑になるリスクがある。
- リリースノートやドキュメントの整備が不可欠となり、リリース日を基準にバージョン管理を行う必要があるため、情報共有の仕組みを明確にする必要がある。

# References
- [Semantic Versioning Specification (SemVer)](https://semver.org/)
- [GitHub Versioning Best Practices](https://docs.github.com/en/repositories/releasing-projects-on-github)

---

## GitHubのリリースノートについて
GitHubではリリースノート機能をサポートしている。詳細はこちら: [GitHub Automatically Generated Release Notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)

### リリースノートが必要な理由

#### 一貫性の確保
自動生成機能により、コミットメッセージやプルリクエストからリリース情報が抽出されるが、リリース情報の全体的な構造や内容が常に一貫して提示される。

#### 透明性の向上
手動でのリリースノート作成と自動生成機能を組み合わせることで、透明性の高いリリースプロセスを構築できる。自動生成された内容を確認し、必要に応じて追加情報やコメントをテンプレートに基づいて補足可能。

#### 効率化
自動生成されたリリースノートをテンプレート形式に整理することで、リリースにかかる作業時間を短縮できる。よりスピーディなリリースが可能になる。

#### 正確性の向上
すべての変更が漏れなくリリースノートに反映されるため、手作業による記載ミスや変更内容の漏れを防ぐことができる。

### 説明フィールドに記載する仮テンプレート
```md
# v1.1.0 - 2024-10-21

## 概要
このリリースでは、新しいダッシュボード機能の追加、検索パフォーマンスの向上、およびいくつかのバグ修正が行われました。
Full Changelog: (https://github.com/your-repo/your-project/commits/1.0.0)
### リリースノート
- 詳細はこちら: [コンフルリンク](https://your-confluence-link)

## 新機能
- **ダッシュボード機能を追加**:
  - リアルタイムデータの視覚化を実現し、ユーザーが効率的に情報を確認できるようになりました。
  - プルリクエスト: [#123](https://github.com/your-repo/your-project/pull/123)
- **フィルタリング機能の改善**:
  - データ検索のための詳細フィルタリングオプションが追加されました。
  - プルリクエスト: [#124](https://github.com/your-repo/your-project/pull/124)

## バグ修正
- ログイン画面の入力フィールドが動作しない問題を修正。
  - プルリクエスト: [#125](https://github.com/your-repo/your-project/pull/125)
- モバイルデバイスでのナビゲーションメニューの表示が崩れる問題を修正。
  - プルリクエスト: [#126](https://github.com/your-repo/your-project/pull/126)

## 改善点
- 検索機能のパフォーマンス向上: 検索結果の表示が3倍速くなりました。
  - プルリクエスト: [#127](https://github.com/your-repo/your-project/pull/127)
- フォームのUIが改善され、ユーザーインターフェースがより使いやすくなりました。
  - プルリクエスト: [#128](https://github.com/your-repo/your-project/pull/128)

## 既知の問題
- 一部のブラウザでダッシュボードが正しく表示されない問題があります（修正予定）。

## マイグレーション手順
- このリリースではデータベーススキーマの変更が必要です。リリース後に `db:migrate` を実行してください。
  - プルリクエスト: [#129](https://github.com/your-repo/your-project/pull/129)
